# ふるそな プロジェクト固有ルール

## 🚨 Git操作の絶対ルール（最優先）

以下のコマンドは**必ずユーザーの明示的な承認を得てから**実行すること：

### 禁止コマンド（承認必須）
- `git push`（任意のブランチ）
- `vercel deploy`（--prod含む）
- `firebase deploy`
- `npm publish`
- その他、リモートの状態を変更するコマンド

### 承認プロセス（必須手順）
1. **変更内容を明確に提示する**
   - 何が変更されたか
   - どこにデプロイされるか
   - 影響範囲は何か

2. **明示的に確認を求める**
   ```
   ⚠️ 次のコマンドを実行しようとしています：
      git push origin main

   これにより以下の変更が本番環境に反映されます：
   - [変更内容のリスト]

   実行してよろしいですか？
   ```

3. **ユーザーの承認を待つ**
   - 「はい」「OK」「承認」「yes」などの明確な承認
   - 承認がない限り絶対に実行しない

4. **承認後に実行**
   - 承認を得た後のみコマンドを実行する

### ❌ 違反例
```bash
# これは絶対にやってはいけない
git add . && git commit -m "..." && git push origin main
# 承認なしでプッシュまで自動実行
```

### ✅ 正しい例
```
1. git add .
2. git commit -m "..."
3. [ユーザーに確認を求める]
4. [承認を待つ]
5. git push origin main  ← 承認後に実行
```

---

## ✅ 承認不要な操作（ローカルのみ）

以下の操作は承認なしで実行可能：
- `git add`
- `git commit`（ローカルコミットのみ）
- `git status`
- `git log`
- `git diff`
- `npm install`
- `npm run build`
- `npm run dev`
- `npm test`
- ファイルの読み書き（Read, Write, Edit）

---

## 📋 その他のプロジェクトルール

### セキュリティルール
- APIキーや環境変数の値を絶対にコードに記載しない
- `.env.local` ファイルをGitにコミットしない
- 実際の認証情報をドキュメントに記載しない

### コーディング規約
- 既存ファイルの編集を優先、新規ファイル作成は最小限に
- 絵文字は明示的な指示がない限り使用しない
- ドキュメント（.md）ファイルは明示的な指示がない限り作成しない

### TodoWrite使用ルール
- 複数ステップのタスクには必ずTodoWriteを使用
- タスク完了時にすぐに completed に変更
- 1つのタスクのみを in_progress に保つ

---

## 🔄 このファイルについて

このファイル（`.claude/instructions.md`）は、Claude Codeが自動的に読み込むプロジェクト固有のルールです。

- **変更時**: このファイルを編集すれば、すべての会話で新しいルールが適用されます
- **優先度**: README.mdのルールよりも優先されます
- **適用範囲**: このプロジェクト（furusona）でのみ有効

---

## 📝 更新履歴

- 2025-10-31: 初版作成（Git操作ルールを追加）
